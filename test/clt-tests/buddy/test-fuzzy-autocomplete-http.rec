––– block: ../base/start-searchd –––
––– input –––
apt-get update -y > /dev/null; echo $?
––– output –––
0
––– input –––
apt-get install jq -y > /dev/null; echo $?
––– output –––
debconf: delaying package configuration, since apt-utils is not installed
0
––– input –––
php -d memory_limit=2G ./test/clt-tests/scripts/load_names_attr.php --batch-size=1000 --concurrency=4 --docs=5000000 --multiplier=1 --rt-mem-limit=2G --start-id=1 --min-infix-len=2 > /dev/null; echo $?
––– output –––
0
––– input –––
mysql -h0 -P9306 -e "SHOW CREATE TABLE name;" | grep "min_infix_len='2'" | sed "s/.*\(min_infix_len='2'\).*/\1/"
––– output –––
min_infix_len='2'
––– input –––
mysql -h0 -P9306 -e "SELECT COUNT(*) FROM name;"
––– output –––
+----------+
| count(*) |
+----------+
|  5000000 |
+----------+
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"RICH"}}]}},"options":{"fuzzy":true},"size":10,"sort":[{"id":"asc"}]}' | jq 'del(.hits.hits[]._score, .hits.hits[]._id)'
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 41592,
"total_relation": "eq",
"hits": [
{
"_source": {
"username": "BRICE MULLIN",
"s": "a"
}
},
{
"_source": {
"username": "GRICELDA SKELTON",
"s": "a"
}
},
{
"_source": {
"username": "LAURICE SOLIZ",
"s": "a"
}
},
{
"_source": {
"username": "ERICH LLAMAS",
"s": "a"
}
},
{
"_source": {
"username": "LATRICE MANCILLA",
"s": "a"
}
},
{
"_source": {
"username": "MAURICE PRATHER",
"s": "a"
}
},
{
"_source": {
"username": "BRICE OLIVARES",
"s": "a"
}
},
{
"_source": {
"username": "PATRICE WOOD",
"s": "a"
}
},
{
"_source": {
"username": "JUNITA RICHARD",
"s": "a"
}
},
{
"_source": {
"username": "AUREA RICO",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"EBGRNA"}}]}},"options":{"fuzzy":true},"size":10,"sort":[{"id":"asc"}]}' | jq 'del(.hits.hits[]._score, .hits.hits[]._id)'
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 21778,
"total_relation": "eq",
"hits": [
{
"_source": {
"username": "CONCEPTION ABERNATHY",
"s": "a"
}
},
{
"_source": {
"username": "BERNARDINA OSHEA",
"s": "a"
}
},
{
"_source": {
"username": "VERNA VITALE",
"s": "a"
}
},
{
"_source": {
"username": "BERNADETTE HALES",
"s": "a"
}
},
{
"_source": {
"username": "BERNARDINA MCMILLAN",
"s": "a"
}
},
{
"_source": {
"username": "ERNA ULLOA",
"s": "a"
}
},
{
"_source": {
"username": "SAMIRA ABERNATHY",
"s": "a"
}
},
{
"_source": {
"username": "JUDI BERNAL",
"s": "a"
}
},
{
"_source": {
"username": "MERNA GAITHER",
"s": "a"
}
},
{
"_source": {
"username": "BERNADINE HIBBARD",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"EBGRNA"}}]}},"options":{"fuzzy":true},"size":10,"sort":[{"id":"asc"}]}' | jq 'del(.hits.hits[]._score, .hits.hits[]._id)'
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 21778,
"total_relation": "eq",
"hits": [
{
"_source": {
"username": "CONCEPTION ABERNATHY",
"s": "a"
}
},
{
"_source": {
"username": "BERNARDINA OSHEA",
"s": "a"
}
},
{
"_source": {
"username": "VERNA VITALE",
"s": "a"
}
},
{
"_source": {
"username": "BERNADETTE HALES",
"s": "a"
}
},
{
"_source": {
"username": "BERNARDINA MCMILLAN",
"s": "a"
}
},
{
"_source": {
"username": "ERNA ULLOA",
"s": "a"
}
},
{
"_source": {
"username": "SAMIRA ABERNATHY",
"s": "a"
}
},
{
"_source": {
"username": "JUDI BERNAL",
"s": "a"
}
},
{
"_source": {
"username": "MERNA GAITHER",
"s": "a"
}
},
{
"_source": {
"username": "BERNADINE HIBBARD",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"ANT"}}]}},"options":{"fuzzy":true},"size":10,"sort":[{"id":"asc"}]}' | jq 'del(.hits.hits[]._score, .hits.hits[]._id)'
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 1246771,
"total_relation": "eq",
"hits": [
{
"_source": {
"username": "DAMIAN SOMERS",
"s": "a"
}
},
{
"_source": {
"username": "TAMI WHELAN",
"s": "a"
}
},
{
"_source": {
"username": "DARCY SANDBERG",
"s": "a"
}
},
{
"_source": {
"username": "RANEE BROUGHTON",
"s": "a"
}
},
{
"_source": {
"username": "STEPHEN ALLMAN",
"s": "a"
}
},
{
"_source": {
"username": "AMANDA KEY",
"s": "a"
}
},
{
"_source": {
"username": "ELFRIEDA HANKS",
"s": "a"
}
},
{
"_source": {
"username": "NANNIE WILLINGHAM",
"s": "a"
}
},
{
"_source": {
"username": "YOULANDA TROUT",
"s": "a"
}
},
{
"_source": {
"username": "ANTHONY SMOOT",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"tony"}}]}},"options":{"fuzzy":true},"size":10,"sort":[{"id":"asc"}]}' | jq 'del(.hits.hits[]._score, .hits.hits[]._id)'
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 10218,
"total_relation": "eq",
"hits": [
{
"_source": {
"username": "KARYL TONEY",
"s": "a"
}
},
{
"_source": {
"username": "TONYA SHERRILL",
"s": "a"
}
},
{
"_source": {
"username": "LEONE TONEY",
"s": "a"
}
},
{
"_source": {
"username": "TONY DUPRE",
"s": "a"
}
},
{
"_source": {
"username": "TONEY SCHOEN",
"s": "a"
}
},
{
"_source": {
"username": "ROCHEL TONEY",
"s": "a"
}
},
{
"_source": {
"username": "TONYA PARRIS",
"s": "a"
}
},
{
"_source": {
"username": "TONY WEISS",
"s": "a"
}
},
{
"_source": {
"username": "TOBY YAZZIE",
"s": "a"
}
},
{
"_source": {
"username": "TOBY MCCARTY",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"SMITH"}}]}},"options":{"fuzzy":true},"size":10,"sort":[{"id":"asc"}]}' | jq 'del(.hits.hits[]._score, .hits.hits[]._id)'
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 33734,
"total_relation": "eq",
"hits": [
{
"_source": {
"username": "MEREDITH BEASLEY",
"s": "a"
}
},
{
"_source": {
"username": "RUDY SOUTH",
"s": "a"
}
},
{
"_source": {
"username": "ADRIANA HIGGINBOTHAM",
"s": "a"
}
},
{
"_source": {
"username": "KEITH STILLWELL",
"s": "a"
}
},
{
"_source": {
"username": "BILLI HIGGINBOTHAM",
"s": "a"
}
},
{
"_source": {
"username": "MIGNON SOUTHERN",
"s": "a"
}
},
{
"_source": {
"username": "JOHNIE SMYTH",
"s": "a"
}
},
{
"_source": {
"username": "SCOTTIE NOE",
"s": "a"
}
},
{
"_source": {
"username": "RUTHANN DICKSON",
"s": "a"
}
},
{
"_source": {
"username": "DOROTHA BLEDSOE",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"SMYTH"}}]}},"options":{"fuzzy":true},"size":10,"sort":[{"id":"asc"},{"username.keyword":"asc"}]}' | jq 'del(.hits.hits[]._score, .hits.hits[]._id)'
––– output –––
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"layouts":"us,ru"}}' | jq -M
––– output –––
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"append":1}}' | jq -M
––– output –––
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"prepend":0}}' | jq -M
––– output –––
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"prepend":1,"append":1}}' | jq -M
––– output –––
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"fuzziness":1,"layouts":"","append":1,"prepend":1}}' | jq -M
––– output –––
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"fuzziness":2,"layouts":"us,ru","append":1,"prepend":1,"expansion_len":2}}' | jq -M
––– output –––
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"gr","options":{"fuzziness":1,"layouts":"ru","append":1,"prepend":1}}' | jq -M
––– output –––
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"fuzziness":1,"sort":[{"query":"asc"},{"id":"asc"}]}}' | jq -M
––– output –––
