––– block: ../base/start-searchd –––
––– input –––
apt-get update -y > /dev/null; echo $?
––– output –––
0
––– input –––
apt-get install jq -y > /dev/null; echo $?
––– output –––
debconf: delaying package configuration, since apt-utils is not installed
0
––– input –––
php -d memory_limit=2G ./test/clt-tests/scripts/load_names_attr.php 100000 4 1000000 1 2G 1 2 > /dev/null; echo $?
––– output –––
0
––– input –––
mysql -h0 -P9306 -e "SHOW CREATE TABLE name;" | grep "min_infix_len='2'" | sed "s/.*\(min_infix_len='2'\).*/\1/"
––– output –––
min_infix_len='2'
––– input –––
mysql -h0 -P9306 -e "SELECT COUNT(*) FROM name;"
––– output –––
+----------+
| count(*) |
+----------+
|  1000000 |
+----------+
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"RICH"}}]}},"options":{"fuzzy":true}}' | jq -M
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 8341,
"total_relation": "eq",
"hits": [
{
"_id": 461735,
"_score": 1557,
"_source": {
"username": "RICO DIETRICH",
"s": "a"
}
},
{
"_id": 425184,
"_score": 1551,
"_source": {
"username": "LEATRICE RICH",
"s": "a"
}
},
{
"_id": 944560,
"_score": 1551,
"_source": {
"username": "BRICE RICH",
"s": "a"
}
},
{
"_id": 182,
"_score": 1544,
"_source": {
"username": "MAURICE RICE",
"s": "a"
}
},
{
"_id": 500137,
"_score": 1542,
"_source": {
"username": "RICO JOHNS",
"s": "a"
}
},
{
"_id": 900276,
"_score": 1542,
"_source": {
"username": "JARROD RICO",
"s": "a"
}
},
{
"_id": 800396,
"_score": 1542,
"_source": {
"username": "JANEAN RICO",
"s": "a"
}
},
{
"_id": 700516,
"_score": 1542,
"_source": {
"username": "LORE RICO",
"s": "a"
}
},
{
"_id": 900615,
"_score": 1542,
"_source": {
"username": "RICO CARLTON",
"s": "a"
}
},
{
"_id": 600636,
"_score": 1542,
"_source": {
"username": "LINNIE RICO",
"s": "a"
}
},
{
"_id": 500756,
"_score": 1542,
"_source": {
"username": "MOLLY RICO",
"s": "a"
}
},
{
"_id": 400876,
"_score": 1542,
"_source": {
"username": "FORREST RICO",
"s": "a"
}
},
{
"_id": 911,
"_score": 1542,
"_source": {
"username": "RICO LUGO",
"s": "a"
}
},
{
"_id": 300996,
"_score": 1542,
"_source": {
"username": "OLINDA RICO",
"s": "a"
}
},
{
"_id": 201116,
"_score": 1542,
"_source": {
"username": "SHONNA RICO",
"s": "a"
}
},
{
"_id": 101236,
"_score": 1542,
"_source": {
"username": "LUANNE RICO",
"s": "a"
}
},
{
"_id": 1356,
"_score": 1542,
"_source": {
"username": "LESLIE RICO",
"s": "a"
}
},
{
"_id": 401389,
"_score": 1542,
"_source": {
"username": "RICO NAPIER",
"s": "a"
}
},
{
"_id": 801867,
"_score": 1542,
"_source": {
"username": "RICO GILLETTE",
"s": "a"
}
},
{
"_id": 302641,
"_score": 1542,
"_source": {
"username": "RICO TURPIN",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"EBGRNA"}}]}},"options":{"fuzzy":true}}' | jq -M
––– output –––
{
"took": 2,
"timed_out": false,
"hits": {
"total": 4333,
"total_relation": "eq",
"hits": [
{
"_id": 778187,
"_score": 1591,
"_source": {
"username": "BERNA HERNANDES",
"s": "a"
}
},
{
"_id": 580691,
"_score": 1591,
"_source": {
"username": "BERNA SERNA",
"s": "a"
}
},
{
"_id": 800131,
"_score": 1583,
"_source": {
"username": "BERNA GAY",
"s": "a"
}
},
{
"_id": 300905,
"_score": 1583,
"_source": {
"username": "BERNA DENTON",
"s": "a"
}
},
{
"_id": 701383,
"_score": 1583,
"_source": {
"username": "BERNA RIDER",
"s": "a"
}
},
{
"_id": 202157,
"_score": 1583,
"_source": {
"username": "BERNA WAGONER",
"s": "a"
}
},
{
"_id": 602635,
"_score": 1583,
"_source": {
"username": "BERNA CLAWSON",
"s": "a"
}
},
{
"_id": 103409,
"_score": 1583,
"_source": {
"username": "BERNA BOUDREAU",
"s": "a"
}
},
{
"_id": 503887,
"_score": 1583,
"_source": {
"username": "BERNA ROLLER",
"s": "a"
}
},
{
"_id": 904365,
"_score": 1583,
"_source": {
"username": "BERNA WEBSTER",
"s": "a"
}
},
{
"_id": 4661,
"_score": 1583,
"_source": {
"username": "BERNA FOLSOM",
"s": "a"
}
},
{
"_id": 405139,
"_score": 1583,
"_source": {
"username": "BERNA SKINNER",
"s": "a"
}
},
{
"_id": 805617,
"_score": 1583,
"_source": {
"username": "BERNA QUINTANILLA",
"s": "a"
}
},
{
"_id": 306391,
"_score": 1583,
"_source": {
"username": "BERNA BARNARD",
"s": "a"
}
},
{
"_id": 706869,
"_score": 1583,
"_source": {
"username": "BERNA SEAMAN",
"s": "a"
}
},
{
"_id": 207643,
"_score": 1583,
"_source": {
"username": "BERNA DENSON",
"s": "a"
}
},
{
"_id": 608121,
"_score": 1583,
"_source": {
"username": "BERNA COLLADO",
"s": "a"
}
},
{
"_id": 108895,
"_score": 1583,
"_source": {
"username": "BERNA FRAME",
"s": "a"
}
},
{
"_id": 509373,
"_score": 1583,
"_source": {
"username": "BERNA MCKELVEY",
"s": "a"
}
},
{
"_id": 909851,
"_score": 1583,
"_source": {
"username": "BERNA JARAMILLO",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"ANT"}}]}},"options":{"fuzzy":true}}' | jq -M
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 250270,
"total_relation": "eq",
"hits": [
{
"_id": 401952,
"_score": 2528,
"_source": {
"username": "DEANNA DENT",
"s": "a"
}
},
{
"_id": 711580,
"_score": 2528,
"_source": {
"username": "RAEANN DENT",
"s": "a"
}
},
{
"_id": 362000,
"_score": 2528,
"_source": {
"username": "SUANNE DENT",
"s": "a"
}
},
{
"_id": 896358,
"_score": 2528,
"_source": {
"username": "ROSANNA DENT",
"s": "a"
}
},
{
"_id": 197198,
"_score": 2528,
"_source": {
"username": "DEEANNA DENT",
"s": "a"
}
},
{
"_id": 305410,
"_score": 2522,
"_source": {
"username": "VIVAN KENT",
"s": "a"
}
},
{
"_id": 809804,
"_score": 2522,
"_source": {
"username": "SANG KENT",
"s": "a"
}
},
{
"_id": 210524,
"_score": 2522,
"_source": {
"username": "LILIAN KENT",
"s": "a"
}
},
{
"_id": 515158,
"_score": 2522,
"_source": {
"username": "ANGLA KENT",
"s": "a"
}
},
{
"_id": 919672,
"_score": 2522,
"_source": {
"username": "HANA KENT",
"s": "a"
}
},
{
"_id": 819792,
"_score": 2522,
"_source": {
"username": "CANDIDA KENT",
"s": "a"
}
},
{
"_id": 924666,
"_score": 2522,
"_source": {
"username": "CANDIS KENT",
"s": "a"
}
},
{
"_id": 829780,
"_score": 2522,
"_source": {
"username": "ANA KENT",
"s": "a"
}
},
{
"_id": 734894,
"_score": 2522,
"_source": {
"username": "LAURAN KENT",
"s": "a"
}
},
{
"_id": 635014,
"_score": 2522,
"_source": {
"username": "DANIKA KENT",
"s": "a"
}
},
{
"_id": 340368,
"_score": 2522,
"_source": {
"username": "FERNANDO KENT",
"s": "a"
}
},
{
"_id": 240488,
"_score": 2522,
"_source": {
"username": "JOANE KENT",
"s": "a"
}
},
{
"_id": 145602,
"_score": 2522,
"_source": {
"username": "TANESHA KENT",
"s": "a"
}
},
{
"_id": 350356,
"_score": 2522,
"_source": {
"username": "TANDY KENT",
"s": "a"
}
},
{
"_id": 954630,
"_score": 2522,
"_source": {
"username": "BRANDON KENT",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"tony"}}]}},"options":{"fuzzy":true}}' | jq -M
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 4246,
"total_relation": "eq",
"hits": [
{
"_id": 995722,
"_score": 2550,
"_source": {
"username": "TONY TONEY",
"s": "a"
}
},
{
"_id": 901646,
"_score": 1528,
"_source": {
"username": "RUTHIE TONG",
"s": "a"
}
},
{
"_id": 801766,
"_score": 1528,
"_source": {
"username": "ANDERSON TONG",
"s": "a"
}
},
{
"_id": 701886,
"_score": 1528,
"_source": {
"username": "LEIGHA TONG",
"s": "a"
}
},
{
"_id": 602006,
"_score": 1528,
"_source": {
"username": "LUISE TONG",
"s": "a"
}
},
{
"_id": 502126,
"_score": 1528,
"_source": {
"username": "JADA TONG",
"s": "a"
}
},
{
"_id": 402246,
"_score": 1528,
"_source": {
"username": "KELSEY TONG",
"s": "a"
}
},
{
"_id": 302366,
"_score": 1528,
"_source": {
"username": "DIEGO TONG",
"s": "a"
}
},
{
"_id": 202486,
"_score": 1528,
"_source": {
"username": "ORETHA TONG",
"s": "a"
}
},
{
"_id": 102606,
"_score": 1528,
"_source": {
"username": "JULIENNE TONG",
"s": "a"
}
},
{
"_id": 2726,
"_score": 1528,
"_source": {
"username": "KENDALL TONG",
"s": "a"
}
},
{
"_id": 906640,
"_score": 1528,
"_source": {
"username": "TANYA TONG",
"s": "a"
}
},
{
"_id": 806760,
"_score": 1528,
"_source": {
"username": "HOMER TONG",
"s": "a"
}
},
{
"_id": 706880,
"_score": 1528,
"_source": {
"username": "SHERILL TONG",
"s": "a"
}
},
{
"_id": 607000,
"_score": 1528,
"_source": {
"username": "MICKI TONG",
"s": "a"
}
},
{
"_id": 507120,
"_score": 1528,
"_source": {
"username": "MAYME TONG",
"s": "a"
}
},
{
"_id": 407240,
"_score": 1528,
"_source": {
"username": "ASHLEY TONG",
"s": "a"
}
},
{
"_id": 307360,
"_score": 1528,
"_source": {
"username": "MARCUS TONG",
"s": "a"
}
},
{
"_id": 207480,
"_score": 1528,
"_source": {
"username": "VIKI TONG",
"s": "a"
}
},
{
"_id": 107600,
"_score": 1528,
"_source": {
"username": "MUI TONG",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"SMITH"}}]}}, "sort":[{"id":"desc"},{"username":"asc"}], "options":{"fuzzy":true}}' | jq -M
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 7168,
"total_relation": "eq",
"hits": [
{
"_id": 999782,
"_score": 1,
"_source": {
"username": "EDITH TERRELL",
"s": "a"
}
},
{
"_id": 999574,
"_score": 1,
"_source": {
"username": "LEIGH WHITEHEAD",
"s": "a"
}
},
{
"_id": 999516,
"_score": 1,
"_source": {
"username": "ANTONIA KEITH",
"s": "a"
}
},
{
"_id": 999461,
"_score": 1,
"_source": {
"username": "MINH MATHEWS",
"s": "a"
}
},
{
"_id": 999285,
"_score": 1,
"_source": {
"username": "SCOTTIE CLARKE",
"s": "a"
}
},
{
"_id": 999042,
"_score": 1,
"_source": {
"username": "SCOTTY VALDEZ",
"s": "a"
}
},
{
"_id": 998834,
"_score": 1,
"_source": {
"username": "RODOLFO SCOTT",
"s": "a"
}
},
{
"_id": 998822,
"_score": 1,
"_source": {
"username": "ED WHITE",
"s": "a"
}
},
{
"_id": 998742,
"_score": 1,
"_source": {
"username": "SETH GOODING",
"s": "a"
}
},
{
"_id": 998630,
"_score": 1,
"_source": {
"username": "LEWIS WHITTLE",
"s": "a"
}
},
{
"_id": 998574,
"_score": 1,
"_source": {
"username": "MELVIN WHITEHURST",
"s": "a"
}
},
{
"_id": 998539,
"_score": 1,
"_source": {
"username": "JESSE WHITED",
"s": "a"
}
},
{
"_id": 998509,
"_score": 1,
"_source": {
"username": "KEITH TOLIVER",
"s": "a"
}
},
{
"_id": 998482,
"_score": 1,
"_source": {
"username": "SCOTT MINNICK",
"s": "a"
}
},
{
"_id": 998447,
"_score": 1,
"_source": {
"username": "ARDELIA WHITEMAN",
"s": "a"
}
},
{
"_id": 998388,
"_score": 1,
"_source": {
"username": "NEELY SOUTHERN",
"s": "a"
}
},
{
"_id": 998367,
"_score": 1,
"_source": {
"username": "VASILIKI HITT",
"s": "a"
}
},
{
"_id": 998062,
"_score": 1,
"_source": {
"username": "HIEN WILHITE",
"s": "a"
}
},
{
"_id": 998052,
"_score": 1,
"_source": {
"username": "KATHLINE SOUTHERLAND",
"s": "a"
}
},
{
"_id": 997975,
"_score": 1,
"_source": {
"username": "KEITH LOUIE",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/search -d '{"index":"name","query":{"bool":{"must":[{"match":{"*":"SMYTH"}}]}}, "sort":[{"id":"desc"},{"username":"asc"}], "options":{"fuzzy":true}}' | jq -M
––– output –––
{
"took": %{NUMBER},
"timed_out": false,
"hits": {
"total": 9619,
"total_relation": "eq",
"hits": [
{
"_id": 999718,
"_score": 1,
"_source": {
"username": "HEATHER BLANCHARD",
"s": "a"
}
},
{
"_id": 999675,
"_score": 1,
"_source": {
"username": "DOROTHY VENTURA",
"s": "a"
}
},
{
"_id": 999565,
"_score": 1,
"_source": {
"username": "ELLSWORTH JACOBSON",
"s": "a"
}
},
{
"_id": 999520,
"_score": 1,
"_source": {
"username": "HOYT MCCLAIN",
"s": "a"
}
},
{
"_id": 999516,
"_score": 1,
"_source": {
"username": "ANTONIA KEITH",
"s": "a"
}
},
{
"_id": 999508,
"_score": 1,
"_source": {
"username": "OTHA HUTCHINSON",
"s": "a"
}
},
{
"_id": 999458,
"_score": 1,
"_source": {
"username": "FLORENCIO HEATH",
"s": "a"
}
},
{
"_id": 999372,
"_score": 1,
"_source": {
"username": "CLAUDIO ROTH",
"s": "a"
}
},
{
"_id": 999285,
"_score": 1,
"_source": {
"username": "SCOTTIE CLARKE",
"s": "a"
}
},
{
"_id": 999121,
"_score": 1,
"_source": {
"username": "SCOT CAMPOS",
"s": "a"
}
},
{
"_id": 999042,
"_score": 1,
"_source": {
"username": "SCOTTY VALDEZ",
"s": "a"
}
},
{
"_id": 998973,
"_score": 1,
"_source": {
"username": "HEATH ROBERTSON",
"s": "a"
}
},
{
"_id": 998834,
"_score": 1,
"_source": {
"username": "RODOLFO SCOTT",
"s": "a"
}
},
{
"_id": 998742,
"_score": 1,
"_source": {
"username": "SETH GOODING",
"s": "a"
}
},
{
"_id": 998711,
"_score": 1,
"_source": {
"username": "EVERETT STROTHER",
"s": "a"
}
},
{
"_id": 998509,
"_score": 1,
"_source": {
"username": "KEITH TOLIVER",
"s": "a"
}
},
{
"_id": 998482,
"_score": 1,
"_source": {
"username": "SCOTT MINNICK",
"s": "a"
}
},
{
"_id": 998399,
"_score": 1,
"_source": {
"username": "MADDIE WORTH",
"s": "a"
}
},
{
"_id": 998388,
"_score": 1,
"_source": {
"username": "NEELY SOUTHERN",
"s": "a"
}
},
{
"_id": 998229,
"_score": 1,
"_source": {
"username": "JULIETTA WENTWORTH",
"s": "a"
}
}
]
}
}
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"layouts":"us,ru"}}' | jq -M
––– output –––
[
{
"total": 10,
"error": "",
"warning": "",
"columns": [
{
"query": {
"type": "string"
}
}
],
"data": [
{
"query": "joe"
},
{
"query": "john"
},
{
"query": "jordan"
},
{
"query": "jose"
},
{
"query": "joseph"
},
{
"query": "joan"
},
{
"query": "jody"
},
{
"query": "joey"
},
{
"query": "johnie"
},
{
"query": "johnnie"
}
]
}
]
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"append":1}}' | jq -M
––– output –––
[
{
"total": 10,
"error": "",
"warning": "",
"columns": [
{
"query": {
"type": "string"
}
}
],
"data": [
{
"query": "joe"
},
{
"query": "john"
},
{
"query": "jordan"
},
{
"query": "jose"
},
{
"query": "joseph"
},
{
"query": "joan"
},
{
"query": "jody"
},
{
"query": "joey"
},
{
"query": "johnie"
},
{
"query": "johnnie"
}
]
}
]
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"prepend":0}}' | jq -M
––– output –––
[
{
"total": 10,
"error": "",
"warning": "",
"columns": [
{
"query": {
"type": "string"
}
}
],
"data": [
{
"query": "joseph"
},
{
"query": "jose"
},
{
"query": "jordan"
},
{
"query": "joe"
},
{
"query": "john"
},
{
"query": "joyce"
},
{
"query": "joy"
},
{
"query": "joan"
},
{
"query": "joshua"
},
{
"query": "johnson"
}
]
}
]
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"prepend":1,"append":1}}' | jq -M
––– output –––
[
{
"total": 10,
"error": "",
"warning": "",
"columns": [
{
"query": {
"type": "string"
}
}
],
"data": [
{
"query": "joe"
},
{
"query": "john"
},
{
"query": "jordan"
},
{
"query": "jose"
},
{
"query": "joseph"
},
{
"query": "joan"
},
{
"query": "jody"
},
{
"query": "joey"
},
{
"query": "johnie"
},
{
"query": "johnnie"
}
]
}
]
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"fuzziness":1,"layouts":"","append":1,"prepend":1}}' | jq -M
––– output –––
[
{
"total": 10,
"error": "",
"warning": "",
"columns": [
{
"query": {
"type": "string"
}
}
],
"data": [
{
"query": "joe"
},
{
"query": "john"
},
{
"query": "jordan"
},
{
"query": "jose"
},
{
"query": "joseph"
},
{
"query": "joan"
},
{
"query": "jody"
},
{
"query": "joey"
},
{
"query": "johnie"
},
{
"query": "johnnie"
}
]
}
]
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"fuzziness":2,"layouts":"us,ru","append":1,"prepend":1,"expansion_len":2}}' | jq -M
––– output –––
[
{
"total": 6,
"error": "",
"warning": "",
"columns": [
{
"query": {
"type": "string"
}
}
],
"data": [
{
"query": "joe"
},
{
"query": "john"
},
{
"query": "jose"
},
{
"query": "joan"
},
{
"query": "jody"
},
{
"query": "joey"
}
]
}
]
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"gr","options":{"fuzziness":1,"layouts":"ru","append":1,"prepend":1}}' | jq -M
––– output –––
[
{
"total": 10,
"error": "",
"warning": "",
"columns": [
{
"query": {
"type": "string"
}
}
],
"data": [
{
"query": "gregory"
},
{
"query": "graham"
},
{
"query": "grant"
},
{
"query": "grace"
},
{
"query": "grady"
},
{
"query": "grover"
},
{
"query": "gracia"
},
{
"query": "gregg"
},
{
"query": "graves"
},
{
"query": "griffin"
}
]
}
]
––– input –––
curl -sX POST http://localhost:9308/autocomplete -d '{"table":"name","query":"jo","options":{"fuzziness":1}}' | jq -M
––– output –––
[
{
"total": %{NUMBER},
"error": "",
"warning": "",
"columns": [
{
"query": {
"type": "string"
}
}
],
"data": [
{
"query": "joe"
},
{
"query": "john"
},
{
"query": "jordan"
},
{
"query": "jose"
},
{
"query": "joseph"
},
{
"query": "joan"
},
{
"query": "jody"
},
{
"query": "joey"
},
{
"query": "johnie"
},
{
"query": "johnnie"
}
]
}
]
